<VirtualHost *:80>
  ServerName api.mon-site.ca
  RewriteEngine On
  RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>

<VirtualHost *:443>
  ServerName api.mon-site.ca
  SSLEngine on
  SSLCertificateFile /etc/letsencrypt/live/api.mon-site.ca/fullchain.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/api.mon-site.ca/privkey.pem

  ProxyPreserveHost On
  ProxyPass / http://127.0.0.1:8000/
  ProxyPassReverse / http://127.0.0.1:8000/

  RequestHeader set X-Forwarded-Proto "https"
</VirtualHost>
